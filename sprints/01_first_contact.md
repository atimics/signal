# Sprint Plan: "First Contact"

**Sprint Goal:** Transform the project from a technology demo into a playable game prototype. The primary objective is to introduce core gameplay mechanics and prove the viability of the real-time AI system. By the end of this sprint, a player will be able to interact with a physically solid world and witness tangible AI reactions to their presence.

---

## P0: Core Gameplay - Physics and Interaction

This is the highest priority. The game world must feel solid and obey basic physical laws.

*   **User Story:** As a player, I want my ship to collide with celestial bodies so that the universe feels tangible and I can't fly through objects.
*   **Tasks:**
    1.  **Implement Sphere-Based Collision:** Create a simple collision detection system. For now, representing all entities as spheres is sufficient.
    2.  **Create Collision Component:** Add a `CollisionComponent` to the entity system that holds physics properties like radius.
    3.  **Implement Collision Response:** When a collision is detected, apply a basic response (e.g., stop the ship's movement).
    4.  **Close Bug #1:** The "Player can fly through the sun" bug will be resolved by giving the sun a large collision sphere.

---

## P1: AI - Real Model Integration

The core premise of the project rests on its AI. This epic will replace the mock AI with a real, functioning model.

*   **User Story:** As a developer, I need to integrate a real Llama.cpp model to validate the AI architecture, measure its performance, and enable true emergent behavior.
*   **Tasks:**
    1.  **Integrate Llama.cpp Library:** Update the `Makefile` to link against the `llama.cpp` library.
    2.  **Implement Real Inference:** Replace the mock functions in `llama_integration.c` with the actual `llama.cpp` API calls for model loading and text generation.
    3.  **Test with a Real Model:** Download a small, quantized GGUF model suitable for real-time interaction and test the existing dialog system.
    4.  **Add Performance Monitoring:** Log the average inference time for a dialog response to establish a performance baseline.

---

## P2: AI - Reactive Behavior

With a real AI model in place, we can create more dynamic and believable entities.

*   **User Story:** As a player, I want to see other ships react to my presence so that the universe feels more alive and responsive.
*   **Tasks:**
    1.  **Create "Reaction" AI Task:** Introduce a new, medium-priority AI task type (`AI_TASK_REACTION`) that is triggered when the player gets close to an AI entity.
    2.  **Develop Reaction Prompts:** The prompt for this task will ask the model to generate a simple action, such as "turn to face the player," "send a greeting," or "move away cautiously."
    3.  **Parse and Execute Actions:** Enhance `entity_process_ai_response` to parse and execute these new action commands, allowing the AI to control its ship's orientation and movement in simple ways.

---

## Sprint Review: Definition of Done

The sprint will be considered complete when the following conditions are met:

1.  The game builds and runs without errors.
2.  The player's ship stops upon colliding with the sun.
3.  All AI dialog is verifiably generated by the integrated language model.
4.  AI ships visibly turn to acknowledge the player when they approach.
5.  The project's [Roadmap](./docs/project/ROADMAP.md) is updated to reflect the completed work and outline the next set of priorities.
